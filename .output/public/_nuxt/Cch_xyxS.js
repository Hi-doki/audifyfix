import{_}from"./D5qITYxw.js";import{_ as y}from"./Bhp2nFw7.js";import{_ as k,o,c as i,a as n,t as T,F as p,u as m,v as g,n as L,s as v,y as c}from"./DLCLJ7vf.js";const b={name:"Home",components:{Featured:_},data(){return{topTracks:[]}},methods:{getTrackDescription(e){if(e.artists.length>1){let s="";for(let a=0;a<e.artists.length;a++)a===e.artists.length-1?s+=e.artists[a].name:s+=e.artists[a].name+", ";return s}else return e.artists[0].name}},data(){return{topTracks:[],isPageLoaded:!1}},async created(){if(this.isPageLoaded=!0,typeof window<"u"&&(this.isLoggedIn=!!localStorage.getItem("spotify_access_token"),this.isLoggedIn))try{this.userinfo=await v(),this.topTrack=await c("1","short_term"),this.topTracks=await c("17","short_term")}catch(e){console.error("Error fetching top tracks:",e)}}},I={class:"uwu"},w={key:0},D={key:1},P={key:2},B={class:"flex"},F={class:"usrgradient"},x={key:0,class:"items"},N={key:1};function C(e,s,a,E,r,l){var d;const f=_,h=y;return o(),i("div",I,[!e.isLoggedIn&&!r.isPageLoaded?(o(),i("div",w,s[0]||(s[0]=[n("p",null,"Checking Login Details",-1)]))):!e.isLoggedIn&&r.isPageLoaded?(o(),i("div",D,s[1]||(s[1]=[n("p",null,"You need to login, press the login button on the Navbar",-1)]))):e.isLoggedIn&&r.isPageLoaded?(o(),i("div",P,[n("h1",B,[s[2]||(s[2]=n("span",null,"WelcomeÂ ",-1)),n("span",F,T((d=e.userinfo)==null?void 0:d.display_name)+".",1)]),s[4]||(s[4]=n("h2",null,"Top Tracks - 4 Weeks",-1)),r.topTracks.length?(o(),i("div",x,[(o(!0),i(p,null,m(e.topTrack,t=>{var u;return o(),g(f,{key:t.id,title:t.name,description:l.getTrackDescription(t),image:((u=t.album.images[0])==null?void 0:u.url)||"https://avatars.githubusercontent.com/u/106713009?v=4"},null,8,["title","description","image"])}),128)),(o(!0),i(p,null,m(r.topTracks.slice(1),t=>(o(),g(h,{key:t.id,playlist:{title:t.name,description:l.getTrackDescription(t),image:t.album.images&&t.album.images[0]?t.album.images[0].url:""}},null,8,["playlist"]))),128))])):(o(),i("div",N,s[3]||(s[3]=[n("p",null,"Loading top tracks...",-1)])))])):L("",!0)])}const H=k(b,[["render",C],["__scopeId","data-v-bbc3ee24"]]);export{H as default};
